"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1199],{20251:(e,t,a)=>{a.d(t,{A:()=>D});var n=a(37876),o=a(36603),i=a(26831),r=a(44375),s=a(21452),l=a(64164),u=a(21801),c=a(50779),d=a(25528),p=a(29374),m=a(53503),v=a(56557),f=a.n(v),h=a(58683),g=a(59232),U=a(14232),k=a(89248),y=a(51123);let R=e=>{let{form:t,listKey:a,maskConfig:n,format:i,minDate:r,maxDate:s,formItemName:l,formItemProps:u,onComplete:c,...d}=e,{t:p}=(0,g.Bd)(),m=o.A.useWatch(a?[a,...l]:l,t),[v,R]=(0,U.useState)((null==m?void 0:m.format(i))||""),[b,w]=(0,U.useState)(m||t.getFieldValue(a?[a,...l]:l)),A=(0,U.useRef)(null),C=(0,U.useRef)(null),[D,x]=(0,U.useState)(!1),{isMobile:P}=(0,y.A)(),S=d.placeholder||p("Common.DateFormatPlaceholder"),V=p("Common.Apply"),j={pattern:"`d.`m.Y",blocks:{d:{mask:h.Ay.MaskedRange,placeholderChar:p("Common.MaskDayLetter"),from:1,to:31,maxLength:2},m:{mask:h.Ay.MaskedRange,placeholderChar:p("Common.MaskMonthLetter"),from:1,to:12,maxLength:2},Y:{mask:h.Ay.MaskedRange,placeholderChar:p("Common.MaskYearLetter"),from:1900,to:9999}},format:e=>{let t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();return[t<10?"0".concat(t):"".concat(t),a<10?"0".concat(a):"".concat(a),n].join(".")},parse:e=>{let t=e.split(".");return new Date(Number(t[2]),Number(t[1])-1,Number(t[0]))},min:r?f()(r).toDate():void 0,max:s?f()(s).toDate():void 0,autofix:!1,lazy:!1,overwrite:!1},N=()=>{D&&x(!1)};(0,U.useEffect)(()=>{let e=f()(v,i).isValid();""===v&&null===b?(t.setFieldValue(a?[a,...l]:l,null),t.validateFields(a?[[a,...l]]:[l])):e&&(w(f()(v,i)),t.setFieldValue(a?[a,...l]:l,f()(v,i)),t.validateFields(a?[[a,...l]]:[l]))},[v]),(0,U.useEffect)(()=>{R(e=>{let t;if(null==b)return"";""===v&&null!==b&&R(f()(b).format(i));let a=f()(v,i).isValid();return!f()(e,i).isSame(b)&&a?f()(b).format(i):e})},[b]),(0,U.useEffect)(()=>(D&&P&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[D]),(0,U.useEffect)(()=>{void 0!==m&&w(m)},[m]);let B=(0,k.A)(N);return{open:D,setOpen:x,date:b,setDate:w,dateStr:v,inputRef:A,datepickerRef:C,maskOptions:j,handleMaskedInputBlur:e=>{var t;(null==(t=e.relatedTarget)?void 0:t.closest(".ant-picker-dropdown"))?(e.preventDefault(),e.stopPropagation(),x(!0)):(""===e.target.value?(w(null),R("")):f()(e.target.value,i).isValid()?(w(f()(e.target.value,i)),R(e.target.value)):(w(null),R("")),x(!1),C.current.blur())},handleMaskedInputFocus:e=>{x(!0),""===A.current.value||P||e.target.select()},handlePickerFocus:e=>{var t;e.preventDefault(),e.stopPropagation(),!e.target.classList.contains("ant-picker-panel")&&(null==(t=e.target)?void 0:t.closest(".ant-picker-dropdown"))&&(e.preventDefault(),e.stopPropagation()),x(!0)},handlePickerChange:e=>{w(e),null===e?R(""):null==c||c(),x(!1)},changePopupContainer:e=>e.closest(".ant-form-item-control-input"),placeholder:S,handleOutsideClick:N,wrapperRef:B,appyText:V,handleComplete:e=>{f()(e,i).isValid()&&(null==c||c(),w(f()(e,i)),R(e),x(!1))},isMobile:P}};var b=a(44264);let w=(0,b.Ay)(d.A).withConfig({componentId:"sc-7aff5a59-0"})(["position:relative;.ant-form-item{&.hide{position:relative;.ant-form-item-control-input{min-height:0 !important;.ant-form-item-control-input-content{visibility:hidden !important;width:0 !important;height:0 !important;position:absolute !important;top:0 !important;left:0 !important;}}}}.ant-picker-input{input,input:disabled{color:rgba(0,0,0,0);}","}.maskedInput{position:absolute;top:0;left:0;","}.maskedDatePickerInput{border-radius:8px;min-height:40px;}.ant-picker-dropdown{}"],e=>e.theme.screen.isMobile&&(0,b.AH)(["caret-color:transparent;"]),e=>e.theme.screen.isMobile&&(0,b.AH)(["caret-color:transparent;"])),A=(0,b.Ay)(d.A).withConfig({componentId:"sc-7aff5a59-1"})(["",""],e=>e.theme.screen.isMobile&&(0,b.AH)(["position:fixed;bottom:0;left:0;right:0;background-color:white;z-index:1000;height:100%;overflow:hidden;.datepicker-mobile-header{display:flex;align-items:center;padding:16px;gap:12px;border-bottom:1px solid ",";.title{font-size:16px;font-weight:bold;margin-bottom:0;}.close-btn{width:40px;height:40px;padding:0;margin:0;align-items:center;justify-content:center;.ant-btn-icon{margin-left:7px;}}}.body-footer{display:flex;flex-direction:column;height:calc(100% - 70px);justify-content:space-between;align-items:center;.date-picker,.date-picker-footer{padding:16px;}.date-picker-footer{background-color:",";width:90%;}}"],e.theme.antd.colorSplit,e.theme.antd.colorBgBase)),C=e=>{let{form:t,listKey:a,maskConfig:v,format:f,minDate:h,maxDate:g,formItemName:U,formItemProps:k,size:y,defaultPickerValue:b,label:C,inputMode:D="numeric",onComplete:x,...P}=e,{open:S,inputRef:V,datepickerRef:j,maskOptions:N,date:B,dateStr:G,handleMaskedInputBlur:M,handleMaskedInputFocus:I,handlePickerFocus:F,handlePickerChange:T,changePopupContainer:E,placeholder:_,wrapperRef:L,appyText:O,handleOutsideClick:H,handleComplete:z,isMobile:Y}=R({form:t,listKey:a,maskConfig:v,format:f,formItemName:U,formItemProps:k,minDate:h,maxDate:g,onComplete:x,...P});return(0,u.LV)(P)?((0,l.A)("MaskedDatePicker"),(0,n.jsxs)(w,{className:"masked-date-picker",ref:L,children:[(0,n.jsx)(o.A.Item,{name:U,...k,children:(0,n.jsx)(i.A,{id:"".concat(a,"_").concat(U.join("_")),...P,name:U.join("__"),ref:j,style:{width:"100%"},open:S,value:B,tabIndex:-1,disabled:P.disabled,onChange:T,className:"maskedDatePickerInput ".concat(P.className||""),getPopupContainer:E,onFocus:F,format:f,placeholder:"",defaultPickerValue:B||b,disabledDate:P.disabledDate,picker:P.picker,minDate:h||void 0,maxDate:g||void 0,size:y,showNow:!1,panelRender:e=>(0,n.jsxs)(A,{children:[(0,n.jsx)(m.A,{children:(0,n.jsxs)(d.A,{className:"datepicker-mobile-header",children:[(0,n.jsx)(c.A,{onClick:()=>H(),icon:(0,n.jsx)(r.K,{}),className:"close-btn",name:"closeBtn"}),(0,n.jsx)(d.A,{className:"title",children:null!=C?C:_})]})}),(0,n.jsxs)(d.A,{className:"body-footer",children:[(0,n.jsx)(d.A,{className:"date-picker",children:e}),(0,n.jsx)(m.A,{children:(0,n.jsx)(d.A,{className:"date-picker-footer",children:(0,n.jsx)(c.A,{name:"datepicker-button-apply",type:"primary",onClick:()=>T(B),block:!0,children:O})})})]})]})})},"".concat(U.join("-"),"key")),(0,n.jsx)(p.A,{name:"".concat(U.join("__"),"__input"),className:"maskedInput",mask:Date,maskOptions:N,type:"text",suffix:(0,n.jsx)(n.Fragment,{}),placeholder:_,ref:V,onComplete:e=>z(e.maskedValue),onClick:I,onFocus:I,onBlur:M,disabled:P.disabled,value:G,size:y,inputMode:Y?"none":D,variant:"borderless",role:"combobox",autoCorrect:"off",autoFocus:!1,autoComplete:"off"})]})):(0,n.jsx)(s.N,{})};C.whyDidYouRender=!0;let D=C},26069:(e,t,a)=>{a.d(t,{Uf:()=>o,WH:()=>r,uJ:()=>i});var n=a(82407);let o=()=>{let e=n.A.get("unfinished-bookings");return e?JSON.parse(e):null},i=(e,t)=>{let a=o()||[];(null==a?void 0:a.find(t=>t.searchParameterHash===e))||null==a||a.push({searchParameterHash:e,bookingTransactionId:t,date:new Date}),n.A.set("unfinished-bookings",JSON.stringify(a))},r=e=>{let t=o();if(t){let a=t.find(t=>t.bookingTransactionId===e);if(a){let e=t.filter(e=>e.bookingTransactionId!==a.bookingTransactionId);n.A.set("unfinished-bookings",JSON.stringify(e))}}}},29374:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(37876),o=a(6607),i=a(58683),r=a(14232),s=a(64164);let l=e=>({KEY_PRESS_EVENT:"undefined"!=typeof navigator&&navigator.userAgent.match(/Android/i)?"onBeforeInput":"onKeyPress"}),u=(0,r.forwardRef)((e,t)=>{let{mask:a=/(.*?)/,maskOptions:u,value:c,defaultValue:d,definitions:p,onComplete:m,...v}=e,{KEY_PRESS_EVENT:f}=l(e);(0,s.A)("MaskedInput");let h=(0,r.useRef)(null),g=(0,r.useMemo)(()=>({mask:a,definitions:{0:/[0-9]/,...null==u?void 0:u.definitions,...p},lazy:!1,...u}),[a]),U=(0,r.useMemo)(()=>i.Ay.createPipe({...g,lazy:!1})(""),[g]),k=(0,r.useRef)(null),y=("string"==typeof c?c:d)||"",R=(0,r.useRef)(y),[b,w]=(0,r.useState)(y),A=(0,r.useCallback)(function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=k.current;if(n&&(t.target&&(t.target.value!==n.value?(n.value=t.target.value,t.target.value=n.value,R.current=n.value,Object.assign(t,{maskedValue:n.value,unmaskedValue:n.unmaskedValue})):"blur"===t.type&&""===n.unmaskedValue?(n.value="",t.target.value=n.unmaskedValue,R.current=n.unmaskedValue,Object.assign(t,{maskedValue:n.unmaskedValue,unmaskedValue:n.unmaskedValue})):(n.value=t.target.value,t.target.value=n.value,R.current=n.value,Object.assign(t,{maskedValue:n.value,unmaskedValue:n.unmaskedValue}))),n.updateValue(),w(R.current),"input"===t.type&&n.masked.isComplete&&n.masked.isFilled&&m&&m(t),a)){var o;null==(o=e.onChange)||o.call(e,t)}},[]),C=(0,r.useCallback)(e=>{if(!(null==e?void 0:e.target))return;let t=h.current,a=k.current;t&&a&&(e.target.value=a.value,t.value=a.value,R.current=a.value,A(e,!0))},[]);function D(){let e=h.current;k.current&&k.current.updateOptions(g),!k.current&&e&&(k.current=(0,i.Ay)(e,g),k.current.on("accept",C)),k.current&&k.current.value!==R.current&&(k.current.value=R.current,k.current.alignCursor())}(0,r.useEffect)(()=>(D(),()=>{var e;null==(e=k.current)||e.destroy(),k.current=null}),[a]),(0,r.useEffect)(()=>{!function(e){R.current=e;let t=h.current,a=k.current;t&&a&&(a.value=e,t.value=a.value,R.current=a.value,w(""===e&&""===a.unmaskedValue?y:a.value))}(y)},[y]);let x=(0,r.useMemo)(()=>({onBlur(t){var a;A(t,!0),null==(a=e.onBlur)||a.call(e,t)},onPaste(t){var a,n;R.current=null==(a=t.clipboardData)?void 0:a.getData("text"),t.target&&(t.target.value=R.current),A(t,!0),null==(n=e.onPaste)||n.call(e,t)},onFocus(t){var a;A(t),null==(a=e.onFocus)||a.call(e,t)},[f]:t=>{var a;A(t,!0),null==(a=e[f])||a.call(e,t)}}),[]);return(0,n.jsx)(o.A,{placeholder:U,...v,...x,onChange:e=>{A(e,!0)},value:b,ref:function(e){t&&("function"==typeof t?t(e):t.current=e),(null==e?void 0:e.input)&&(h.current=e.input,k.current||D())}})});u.displayName="MaskedInput",u.whyDidYouRender=!0;let c=u},38813:(e,t,a)=>{a.d(t,{w:()=>o});var n=a(8214);async function o(e){let t=(0,n.UU)();return(await t.post("/Reservation/GetTransactions",e)).data}},42373:(e,t,a)=>{a.d(t,{F:()=>o});var n=a(8214);async function o(e){let t=(0,n.UU)();return(await t.post("/Reservation/TransactionDetails",e)).data}},53503:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(37876),o=a(25528);let i=e=>{let{children:t,className:a,...i}=e;return(0,n.jsx)(o.A,{...i,className:"visible-on-mobile".concat(a?" ".concat(a):""),children:t})}},74927:(e,t,a)=>{a.d(t,{A:()=>z});var n=a(8214);async function o(e){let t=(0,n.UU)();return(await t.post("/Reservation/AcceptAdditionalAgreement",{encryptedDocumentParameter:e})).data}async function i(){let e=(0,n.UU)();return(await e.post("/Reservation/BeginSaveVoucherCustomerLink")).data}async function r(e){let t=(0,n.UU)();return(await t.post("/Reservation/CheckAcceptAdditionalAgreement",{encyryptedReservationNumber:e})).data}async function s(e,t){let a=(0,n.UU)();return(await a.post("/Reservation/CheckUnfinishedBookingAvailability",{bookingTransactionId:e,markAsChecked:t})).data}async function l(e){let t=(0,n.UU)();return(await t.post("/Reservation/CompletePreReservation",{reservationNumber:e})).data}async function u(e){let t=(0,n.UU)();return(await t.post("/Reservation/DeleteUnfinishedBooking",{bookingTransactionId:e})).data}async function c(e){let t=(0,n.UU)();return(await t.post("/Reservation/DeleteUploadDocument",{encryptedDocumentParameter:e})).data}async function d(e,t){let a=(0,n.UU)(),o={};return t?o={encryptedReservationNumber:t}:e&&(o={bookingTransactionId:e}),(await a.post("/Reservation/GetPersonPriceDetails",o)).data}async function p(e){let t=(0,n.UU)();return(await t.post("/Reservation/GetPrintableReservationDocuments",e)).data}async function m(e){let t=(0,n.UU)();return(await t.post("/Reservation/GetReservationDocuments",{documents:e})).data}async function v(e){let{getCountOnly:t,bookingTransactionIds:a}=e,o=(0,n.UU)();return(await o.post("/Reservation/GetUnfinishedBookings",{getCountOnly:t,bookingTransactionIds:a})).data}async function f(e){let t=(0,n.UU)();return(await t.post("/Reservation/GetUploadDocumentDetail",{encryptedDocumentParameter:e})).data}async function h(e){let t=(0,n.UU)();return(await t.post("/Reservation/GetUploadDocumentList",e)).data}async function g(e){let t=(0,n.UU)();return(await t.post("/Reservation/SaveVoucherCustomerLink",e)).data}async function U(e){let t=(0,n.UU)();return(await t.post("/Reservation/UpdateCustomerInvoicePreReservation",e)).data}async function k(e){let t=(0,n.UU)();return(await t.post("/Reservation/UpdateTouristPreReservation",e)).data.result}async function y(e,t){let a=(0,n.UU)();return(await a.post("/Reservation/UpdateUnfinishedBooking",{bookingTransactionIds:e,setCustomer:t})).data}async function R(e){let t=(0,n.UU)();return(await t.post("/Reservation/UploadDocument",e)).data}async function b(e){let t=(0,n.UU)();return(await t.post("/Reservation/ApplyDiscountCode",e)).data}async function w(e){let t=(0,n.UU)();return(await t.post("/Reservation/ApplyPromoCode",e)).data}async function A(){let e=(0,n.UU)();return(await e.post("/Reservation/BeginReservationCheck")).data}async function C(e){let t=(0,n.UU)();return(await t.post("/Reservation/BeginTransaction",e)).data}async function D(e){let t=(0,n.UU)();return(await t.post("/Reservation/CommitTransaction",{bookingTransactionId:e})).data.result}async function x(e){let t=(0,n.UU)();return(await t.post("/Reservation/DeletePromoCode",e)).data}async function P(e){let t=(0,n.UU)();return(await t.post("/Reservation/DeleteServices",e)).data}async function S(e){let t=(0,n.UU)();return(await t.post("/Reservation/DocumentRecognition",e)).data}var V=a(77869);async function j(e){let t=(0,n.UU)();return(await t.post("/Reservation/Discount/GetCommissionChangeValidityForDiscountCoupon",e)).data}async function N(e){let t=(0,n.UU)();return(await t.post("/Reservation/ValidationRules",e)).data}async function B(e){let t=(0,n.UU)();return(await t.post("/Reservation/GetReservationServicesEditStatus",{encryptedReservationNumber:e})).data}async function G(e){let t=(0,n.UU)();return(await t.post("/Reservation/GetServiceDeleteConfirmationInfo",e)).data}var M=a(42373),I=a(38813);async function F(e){let t=(0,n.UU)();return(await t.post("/Reservation/SaveReservationHelp",e)).data}async function T(e){let t=(0,n.UU)();return(await t.post("/Reservation/SendReservationDocumentWithMail",e)).data}async function E(e){let t=(0,n.UU)();return(await t.post("/Reservation/SaveReservationNote",e)).data}var _=a(26069);async function L(e){let t=(0,n.UU)();return(0,_.WH)(e.bookingTransactionId),(await t.post("/Reservation/SetTransaction",e)).data}async function O(e){let t=(0,n.UU)();return(await t.post("/Reservation/UpdateServices",e)).data}async function H(e){let t=(0,n.UU)();return(await t.post("/Reservation/UpdateTourist",e)).data}let z={BeginTransaction:C,BeginReservationCheck:A,GetAvailableExtraServices:V.S,GetPassengerValidationRules:N,GetTransactionDetails:M.F,UpdateServices:O,DeleteServices:P,SetTransaction:L,GetReservationDocuments:m,GetTransactions:I.w,GetServiceDeleteConfirmationInfo:G,DocumentRecognition:S,SetReservationNote:E,SaveVoucherCustomerLink:g,UpdateCustomerInvoicePreReservation:U,UpdateTouristPreReservation:k,CompletePreReservation:l,AcceptAdditionalAgreement:o,UploadDocument:R,GetUploadDocumentList:h,GetUploadDocumentDetail:f,DeleteUploadDocument:c,CommitTransaction:D,GetUnfinishedBookings:v,DeleteUnfinishedBooking:u,CheckUnfinishedBookingAvailability:s,UpdateUnfinishedBooking:y,ApplyPromoCode:w,DeletePromoCode:x,ApplyDiscountCode:b,GetReservationServicesEditStatus:B,GetCommissionChangeValidityForDiscountCoupon:j,CheckAcceptAdditionalAgreement:r,BeginSaveVoucherCustomerLink:i,SaveReservationHelp:F,GetPrintableReservationDocuments:p,GetPersonPriceDetails:d,SetReservationDocumentWithMail:T,UpdateTourist:H}}}]);